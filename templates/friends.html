{% extends "base.html" %}

{% block title %}Друзья{% endblock %}

{% block content %}

<h1 class="mb-4">Найти друзей</h1>

<form method="get" class="mb-4 d-flex">

    <input type="text" name="search" value="{{ search }}" placeholder="Поиск пользователей" class="form-control me-2">

    <button type="submit" class="btn btn-primary">Поиск</button>

</form>

<ul class="list-group mb-4">

{% for user in users %}

    <li class="list-group-item d-flex justify-content-between align-items-center">

        {{ user.username }}

        <a href="{{ url_for('add_friend', user_id=user.id) }}" class="btn btn-success btn-sm">Отправить запрос</a>

    </li>

{% endfor %}

</ul>

<h2 class="mb-3">Запросы в друзья</h2>

<ul class="list-group mb-4">

{% for request in friend_requests %}

    <li class="list-group-item d-flex justify-content-between align-items-center">

        {{ request.sender.username }}

        <a href="{{ url_for('accept_friend', friend_id=request.id) }}" class="btn btn-success btn-sm">Принять</a>

    </li>

{% endfor %}

</ul>

<h2 class="mb-3">Мои чаты</h2>

<ul class="list-group">

{% for friend in friends %}

    <li class="list-group-item d-flex justify-content-between align-items-center">

        {{ friend.username }}

        <div>

            <a href="{{ url_for('view_profile', user_id=friend.id) }}" class="btn btn-info btn-sm me-2">Профиль</a>

            <a href="{{ url_for('messages', user_id=friend.id) }}" class="btn btn-primary btn-sm me-2">Чат</a>

            <a href="{{ url_for('remove_friend', user_id=friend.id) }}" class="btn btn-danger btn-sm">Удалить</a>

        </div>

    </li>

{% endfor %}

</ul>

{% endblock %}